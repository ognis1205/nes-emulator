file (GLOB NES_CORE_TEST_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/*.cc)

set (NES_CORE_TEST_INCLUDE_PATH ${PROJECT_SOURCE_DIR})

set (NES_CORE_TEST_EXECUTER_NAME "RunAllUnitTests")

add_executable(
  ${NES_CORE_TEST_EXECUTER_NAME}
  ${NES_CORE_TEST_SOURCES}
  ${NES_CORE_SOURCES})

target_compile_features (
  ${NES_CORE_TEST_EXECUTER_NAME}
  PRIVATE
  ${PROJECT_COMPILE_FEATURES})

target_compile_definitions (
  ${NES_CORE_TEST_EXECUTER_NAME}
  PRIVATE
  NES_CORE_TESTS_PRIVATE
  ${PROJECT_COMPILE_DEFINITIONS})

target_include_directories(
  ${NES_CORE_TEST_EXECUTER_NAME}
  PUBLIC
  ${GTEST_INCLUDE_PATH}
  ${GMOCK_INCLUDE_PATH}
  ${PROJECT_INCLUDE_PATH}
  ${NES_CORE_TEST_INCLUDE_PATH})

target_link_libraries(
  ${NES_CORE_TEST_EXECUTER_NAME}
  GTest::GTest
  GTest::GMock)

add_dependencies(
  ${NES_CORE_TEST_EXECUTER_NAME}
  googletest)
